<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Translator.TranslatePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Translator"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:Translator"
    NavigationCacheMode="Required"
    mc:Ignorable="d">

    <Page.Resources>
        <converters:InvBoolConv
            x:Key="InvBoolConv" />
        <converters:BoolToOpacityConv
            x:Key="BoolToOpacityConv" />

        <DataTemplate
            x:Key="LogItemTemplate"
            x:DataType="local:TTranslateLogItem">

            <Grid
                >
                <Grid.ColumnDefinitions>
                    <ColumnDefinition
                        Width="50" />
                    <ColumnDefinition
                        Width="100" />
                    <ColumnDefinition
                        Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition
                        Height="Auto" />
                </Grid.RowDefinitions>

                <TextBlock
                    Grid.Column="0"
                    Text="{x:Bind Indent}"
                    FontSize="16"
                    Margin="4,2,4,2"
                    TextWrapping="Wrap"
                    FontFamily="Courier New" />
                
                <TextBlock
                    Grid.Column="1"
                    Text="{x:Bind Type}"
                    FontSize="16"
                    Margin="4,2,4,2"
                    TextWrapping="Wrap"
                    FontFamily="Courier New" />

                <TextBlock
                    Grid.Column="2"
                    Text="{x:Bind Message}"
                    FontSize="16"
                    Margin="4,2,4,2"
                    TextWrapping="Wrap"
                    FontFamily="Courier New" />
                
            </Grid>
                    
                <!--<StackPanel
                Orientation="Horizontal"
                Spacing="8">
                --><!--<TextBlock
                    Text="{x:Bind Indent}"
                    FontFamily="Courier New"
                     />--><!--
                <TextBlock
                    Text="{x:Bind Message}"
                    FontSize="16"
                    Margin="4,2,4,2"
                    TextWrapping="Wrap"
                    FontFamily="Courier New"
                     />
                --><!--<TextBlock
                    FontFamily="Courier New"
                    FontSize="16"
                    Text="> " />
                <TextBlock
                    Opacity="0.7"
                    FontFamily="Courier New"
                    FontSize="16"
                    TextWrapping="Wrap"
                    Text="{x:Bind Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />--><!--
            </StackPanel>-->
        </DataTemplate>
    </Page.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition
                Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition
                Height="Auto" />
            <RowDefinition
                Height="*" />
        </Grid.RowDefinitions>



        <StackPanel
            Grid.Row="0"
            Margin="10 10 10 10"
            Spacing="10">
            <StackPanel
                VerticalAlignment="Top"
                Orientation="Horizontal">

                <StackPanel
                    Spacing="10">
                    <StackPanel
                        Spacing="20"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                        <Button
                            HorizontalAlignment="Center"
                            IsEnabled="{x:Bind Vm.IsBusy, Mode=OneWay, Converter={StaticResource InvBoolConv}}"
                            Command="{x:Bind Vm.StartTranslateCommand}">
                            <Button.Content>
                                <StackPanel
                                    Orientation="Horizontal"
                                    Spacing="10">
                                    <TextBlock
                                        Text="Translate" />
                                    <ProgressRing
                                        Width="16"
                                        Height="16"
                                        HorizontalAlignment="Center"
                                        IsActive="{x:Bind Vm.IsTranslating, Mode=OneWay}" />
                                </StackPanel>
                            </Button.Content>
                        </Button>
                        <Button
                            IsEnabled="{x:Bind Vm.IsTranslating, Mode=OneWay}"
                            Command="{x:Bind Vm.CancelTranslateCommand}"
                            Content="Cancel" />
                        <ComboBox
                            IsEnabled="{x:Bind Vm.IsBusy, Mode=OneWay, Converter={StaticResource InvBoolConv}}"
                            ItemsSource="{x:Bind Vm.Profiles}"
                            SelectedValue="{x:Bind Vm.SelectedProfile, Mode=TwoWay}"/>
                        <CheckBox
                            Padding="8, 0, 0, 0"
                            Margin="0"
                            Content="Save to cache"
                            IsEnabled="{x:Bind Vm.IsBusy, Mode=OneWay, Converter={StaticResource InvBoolConv}}"
                            IsChecked="{x:Bind Vm.TranslateSaveToCache, Mode=TwoWay}" 
                            VerticalContentAlignment="Center" />
                    </StackPanel>
                    <ProgressBar
                        Value="{x:Bind Vm.TranslateProgress, Mode=OneWay}"
                        Opacity="{x:Bind Vm.IsTranslating, Mode=OneWay, Converter={StaticResource BoolToOpacityConv}}"
                        Maximum="100"
                        Minimum="0">
                    </ProgressBar>
                </StackPanel>

            </StackPanel>
            <TextBlock
                TextWrapping="WrapWholeWords"
                Text="For each language listed in the target project's \Strings folder, excluding en-US, every translatable item is sent to the selected Translation Function for processing. The resulting translations are then stored in their corresponding Resources.resw files.  When complete, run the target project and you should see the translations.  See the sample app code for language testing tips.">
            </TextBlock>



                <StackPanel 
                    Orientation="Horizontal"
                    Margin="10,10,0,0">

                    <RadioButtons
                        x:Name="rbTheme"
                        IsTabStop="False"
                        MaxColumns="3"
                        SelectedIndex="{x:Bind Vm.ThemeIndex, Mode=TwoWay}">
                        <RadioButton
                            x:Uid="Default_rb"
                            Content="Default" />
                        <RadioButton
                            x:Uid="Light_rb"
                            Content="Light" />
                        <RadioButton
                            x:Uid="Dark_rb"
                            Content="Dark" />
                    </RadioButtons>

                    <ToggleSwitch
                        OffContent="Simple Log"
                        OnContent="Verbose Log"
                        IsOn="{x:Bind Vm.Debug, Mode=TwoWay}" />

                </StackPanel>

        </StackPanel>

        <TextBox
            Visibility="Collapsed"
            Grid.Row="1"
            Margin="10 0 10 10"
            FontFamily="Courier New"
            AcceptsReturn="True"
            TextWrapping="NoWrap"
            FontWeight="Light"
            IsReadOnly="false"
            TextAlignment="Left"
            Text="{x:Bind Vm.Sss, Mode=OneWay}"
            SelectionStart="{x:Bind Vm.TransLogSelectionStart, Mode=OneWay}"
            SelectionLength="{x:Bind Vm.TransLogSelectionLength, Mode=OneWay}"
            ScrollViewer.VerticalScrollBarVisibility="Auto"
            ScrollViewer.HorizontalScrollBarVisibility="Auto"
            IsTextPredictionEnabled="False">
        </TextBox>


        <!--ItemTemplate="{StaticResource LogItemTemplate}"-->

        <ListView
            Grid.Row="1"
            Visibility="Visible"
            Background="{ThemeResource SolidBackgroundFillColorSecondaryBrush}"
            ItemsSource="{x:Bind Vm.FilteredTranslateLog}"
            ItemTemplate="{StaticResource LogItemTemplate}" />

    </Grid>
</Page>

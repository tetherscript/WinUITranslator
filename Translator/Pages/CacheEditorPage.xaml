<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Translator.CacheEditorPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Translator"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <!-- A simple DataTemplate for displaying each Pair -->
        <DataTemplate
            x:Key="PairTemplate"
            x:DataType="local:Pair">
            <StackPanel
                Orientation="Horizontal"
                Spacing="8">
                <TextBlock
                    Text="{x:Bind Key}"
                    FontWeight="Bold" />
                <TextBlock
                    Text=": " />
                <TextBlock
                    Text="{x:Bind Value}" />
            </StackPanel>
        </DataTemplate>
    </Page.Resources>
    
    <Grid Margin="10,0,10,10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition
                Width="*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition
                Height="Auto" />
            <RowDefinition
                Height="Auto" />
            <RowDefinition
                Height="*" />
        </Grid.RowDefinitions>

        <!--DESCRIPTION-->
        <StackPanel
            Grid.Row="0"
            Spacing="20">
            <TextBlock
                TextWrapping="WrapWholeWords"
                Text="The cache saves past translations to minimize latency and cost. You can edit or remove stored translations as needed.">
            </TextBlock>
        </StackPanel>

        <!--SEARCH-->
        <StackPanel
            Grid.Row="1"
            Margin="0,10,0,10"
            Spacing="10">
            <TextBox
                Text="{x:Bind Vm.SearchText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                PlaceholderText="Type to filter by key..." />
            <StackPanel
                Orientation="Horizontal"
                Spacing="10">
                <Button
                    Content="Clear Search"
                    Command="{x:Bind Vm.ClearSearchCommand}" />
                <Button
                    Content="Save Changes"
                    Command="{x:Bind Vm.SaveChangesCommand}" />
            </StackPanel>

            <!--DETAILS-->
            <StackPanel
                Margin="0,10,0,10"
                Spacing="5">
                <TextBlock
                    Text="Selected Key:" />
                <TextBox
                    IsReadOnly="true"
                    IsSpellCheckEnabled="false"
                    IsTextPredictionEnabled="false"
                    Text="{x:Bind Vm.SelectedPair.Key, Mode=TwoWay}" />
                <TextBlock
                    Text="Selected Value:" />
                <TextBox
                    Text="{x:Bind Vm.SelectedPair.Value, Mode=TwoWay}"
                    IsSpellCheckEnabled="false"
                    IsTextPredictionEnabled="false"
                    AcceptsReturn="True"
                    TextWrapping="Wrap"
                    Height="100" />
            </StackPanel>
        </StackPanel>

        <!--LIST-->
        <ListView
            Grid.Row="2"
            ItemsSource="{x:Bind Vm.FilteredEntries}"
            ItemTemplate="{StaticResource PairTemplate}"
            SelectedItem="{x:Bind Vm.SelectedPair, Mode=TwoWay}">
          </ListView>
        
    </Grid>
</Page>
